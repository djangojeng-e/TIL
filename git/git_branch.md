# Git Branch 



브랜치 (branch)? 



소프트웨어를 개발할때 개발자들은 동일한 소스코드를 함께 공유하고 다루게 됨. 

동일한 소스 코드 위에, 개발자 A는 버그를 수정하기도 하고, 개발자 B는 어떠한 새로운 기능을 만들어 내기도 함. 

여러 사람이 동일한 소스코드를 기반으로 다른 작업을 할때는, 서로 다른 버전의 코드가 만들어 질수 밖에 없음. 



이럴때에, 개발자들이 동시에 다양한 작업을 할수 있게 만들어 주는 기능이 바로 Branch 개념. 



각자의 개발자가, 각각 독립적인 작업 영역 (저장소) 안에서 마음대로 소스코드를 변경하고. 이렇게 분리된 작업 영역에서 변경된 내용은, 나중에 원래 버전과 비교해서 하나의 새로운 버전으로 만들어 낼수 있음. 





**각각의 브랜치는 다른 브랜치의 영향을 받지 않기 때문에 여러 작업을 동시에 진행할수 있음**





프로젝트 (마스터 브랜치)  A -> B -> C -> D  



개발자 B 브랜치 : 버그 수정후 프로젝트 마스터 브랜치 B 에 병합 

개발자 C 브랜치 : 기능 추가후 프로젝트 마스터 브랜치 C 에 병합 

개발자 D 브랜치 : 디자인 수정후 프로젝트 마스터 브랜치 D 에 병합 





이렇게 만들어진 브랜치는 다른 브랜치와 병합 (merge) 를 통해서, 작업한 내용을 다시 새로운 하나의 브랜치로 모을수 있습니다. 



여러 명이서 동시에 작업을 할때에, 다른 사람의 작업에 영향을 주거나 받지 않도록, 먼저 메인 브랜치에서 개발자의 작업 전용 브랜치를 만듦. 각각의 작업 전용 브랜치에서 작업을 마친 후에, 메인 브랜치에 병합함으로 프로젝트를 완성 시켜 나감. 







# 브랜치 (Branch) 만들기 





작업에 다라 자유롭게 브랜치를 만들 수 있음 통합 브랜치는 늘 안정적인 상태를 유지하는것이 중요. 안정적인 상태란, 작업중인 소스코드가 해당 프로젝트의 모든 기능이 정상적으로 동작하는 상태를 의미. 



만약, 이 프로젝트의 버그를 수정한다거나, 새로운 기능을 추가해야 한다던지 해야 할때, 토픽 브랜치를 만들고 작업을 수행함. 처음에 만들어지는 브랜치는 master 브랜치가 보통 통합 브랜브랜치로 사용됨. 





## 토픽 브랜치 (Topic Branch) 



기능 추가나 버그 수정과 같은 단위 작업을 위한 브랜치. 여러개의 작업을 동시에 진행하기 위해, 그 수만큼 토픽 브랜치를 생성할수 있음. 통합 브랜치로부터 생성된 토픽 브랜치에서 특정 작업이 완료되면, 다시 통합 브랜치에 병합하는 방식으로 진행. 이러한 토픽 브랜치는 Feature Branch 라고 부르기도 함. 





## 브랜치 전환 



Git 에서는 언제나 작업할 브랜치를 미리 선택 해야 함. 처음 Git 을 설치하면, 기본으로 'master' 브랜치가 선택되어 있음. 선택된 브랜치가 아닌, 다른 브랜치에서 작업하고 싶을때에는 checkout 명령어를 실행, 원하는 브랜치로 전환할수 있음. 



체크아웃을 실행하여, 브랜치 안에 있는 마지막 커밋 내용이 작업 트리에 펼쳐짐. 브랜치가 전환 되었으므로, 이 후에 실행한 커밋은 전환한 브랜치에 추가 됨. 



## HEAD 



현재 사용중인 브랜치의 선두 부분을 나타내는 이름. 기본적으로 'master'의 선두 부분을 나타냄. 'HEAD' 이용시, 사용하는 브랜치가 변경됨 .





## STATSH 



커밋하지 않은 변경 내용이나, 새롭게 추가한 파일이 인덱스와 작업 트리에 남아 있는 채로, 다른 브랜치로 checkout 하면, 그 변경 내용은 기존 브랜치가 아닌, 전환된 브랜치에서 커밋 할수 있음. 



전환된 브랜치에서도 한 차레 변경이 되어 있는 경우에는, 체크아웃에 실패할수 있음. 이전 브랜치에서 커밋하지 않는 변경 내용을 커밋하거나! stash 를 이용해 일시적으로 변경 내용을 다른곳에 저장하여 충돌을 피하게 한 뒤 체크아웃을 해야함. 



Stash 는 파일의 변경 내용을 일시적으로 기록해두는 영역. stash 를 사용하여 작업 트리와 인덱스 내에서 아직 커밋하지 않은 변경을 일시적으로 저장해 둘수 있음. 이 Stash 에 저장된 변경 내용은 나중에 다시 불러와 원래의 브랜치나 다른 브랜치에 커밋할수 있음. 





# 브랜치 통합하기 



작업이 완료된 브랜치는 최종적으로 통합 브랜치에 병합. 보통 토픽 브랜치를 마스터 브랜치에 병합. 

브랜치 통합에는 merge 와 rebase 를 사용하는 방법의 2가지 종류의 방법이 존재. 



1) merge 

2) rebase 



어떤 방법을 사용하느냐에 따라, 통합 브랜치의 이력이 달라지게 됨. 



merge 와 rebase 의 특징을 간단히 정리하자면 아래와 같음. 



merge 

변경 내용의 이력이 모두 그대로 남아 있기 때문에 이력이 복잡해짐. 



rebase 

이력은 단순해지지만, 원래의 커밋 이력이 변겸됨. 정확한 이력을 남겨야할 필요가 잇을 경우에는 사용하면 안됨. 





# 브랜치의 종류 



**master**

master 브랜치에서는, 배포 가능한 상태만을 관리, 커밋할때에는 태그를 사용하여 배포 번호를 기록함. 



**develop **

develop 브랜치는 통합 브랜치의 역할을 하며, 평소에는 이 브랜치를 기반으로 개발을 진행함. 



**feature branch **

새로운 기능 개발 및 버그 수정이 필요할때에 develop 브래치로부터 분기함. 개발이 완료되면, develop 브랜치로 병합하여 다른 사람들과 공유 



**release branch **

릴리즈 브랜치에서는 버그를 수정하거나 새로운 기능을 포함한 상태로 모든 기능이 정상적으로 동작하는지 확인. 관례적으로 release- 라는 이름을 브랜치 이름앞에 붙여줌. 



릴리즈를 위한 최종적인 버그 수정 등의 개발을 수행함. 모든 준비를 마치고 배포 가능한 상태가 되면, master 브랜치로 병합시키고, 병합한 커밋에 릴리즈 번호 태그를 추가. 



**hotfix branch**



배포한 버전에 긴급하게 수정을 해야 하는 경우, master 브랜치에서 분기하는 브랜치. 관례적으로 브랜치 이름 앞에 hotfix- 를 붙임. 